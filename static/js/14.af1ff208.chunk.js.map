{"version":3,"sources":["Data/LocalStorage.ts","version.ts","Hooks/LocalStorage.ts","Solvers/WordSearchOutput.tsx","Solvers/WordSearchComponent.tsx","Hooks/FocusInput.ts","Views/Solvers/WordSearch.tsx"],"names":["LocalStorage","undefined","this","_isSupported","storage","window","localStorage","x","setItem","removeItem","e","DOMException","code","name","length","clearOnVersionMismatch","key","isSupported","getItem","getKey","objString","JSON","parse","value","object","stringify","clear","STORAGE_KEY_PREFIX","prev","current","compareVersions","prevVersion","VERSION_STORAGE_KEY","didVersionChange","version","useLocalStorage","localStorageKey","onRestoreState","onSaveState","useLayoutEffect","getObject","useEffect","setObject","splitLines","str","split","getGridHighlights","grid","wordsToFind","direction","solver","WordSearchSolver","setDirections","setGrid","setWords","inputGrid","results","shouldHighlight","line","hightlightLine","Array","from","push","result","points","point","y","highlightArray","findWords","getColumnClassName","WordSearchOutput","props","gridInputText","trim","lines","useCardinals","useDiagonals","WordSearchDirection","CardinalAndDiagonal","Cardinal","Diagonal","None","wordListInputText","filter","word","Table","className","borderless","map","row","rowIndex","col","colIndex","WordSearchComponent","inputRef","useCallback","node","focus","useState","setGridInputText","setWordListInputText","setUseCardinals","setUseDiagonals","savedState","Container","fluid","Row","noGutters","Col","md","Card","Header","Body","FormControl","as","onChange","event","element","target","placeholder","Alert","variant","renderEmptyDirection","FormCheck","checked","id","label","type","ref","spellCheck","WordSearch"],"mappings":"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","file":"static/js/14.af1ff208.chunk.js","sourcesContent":["import compareVersions from 'compare-versions';\nimport { version } from '../version';\n\nclass LocalStorage {\n  private static readonly VERSION_STORAGE_KEY = 'appVersion';\n  private static readonly STORAGE_KEY_PREFIX = 'puzztool';\n  private static _isSupported?: boolean;\n\n  public static isSupported() {\n    if (this._isSupported === undefined) {\n      const storage = window.localStorage;\n      const x = '__storage_test__';\n\n      try {\n        storage.setItem(x, x);\n        storage.removeItem(x);\n        this._isSupported = true;\n      } catch (e) {\n        this._isSupported = e instanceof DOMException && (\n          // everything except Firefox\n          e.code === 22 ||\n          // Firefox\n          e.code === 1014 ||\n          // test name field too, because code might not be present\n          // everything except Firefox\n          e.name === 'QuotaExceededError' ||\n          // Firefox\n          e.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\n          // acknowledge QuotaExceededError only if there's something already stored\n          storage.length !== 0;\n      }\n\n      if (this._isSupported) {\n        this.clearOnVersionMismatch();\n      }\n    }\n\n    return this._isSupported;\n  }\n\n  public static getItem(key: string) {\n    if (this.isSupported()) {\n      return window.localStorage.getItem(this.getKey(key));\n    }\n\n    return null;\n  }\n\n  public static getObject<T>(key: string) {\n    if (this.isSupported()) {\n      const objString = window.localStorage.getItem(this.getKey(key));\n\n      if (objString !== null) {\n        return JSON.parse(objString) as T;\n      }\n    }\n\n    return null;\n  }\n\n  public static setItem(key: string, value: string) {\n    if (this.isSupported()) {\n      window.localStorage.setItem(this.getKey(key), value);\n    }\n  }\n\n  public static setObject<T>(key: string, object: T) {\n    if (this.isSupported()) {\n      window.localStorage.setItem(this.getKey(key), JSON.stringify(object));\n    }\n  }\n\n  public static clear() {\n    if (this.isSupported()) {\n      window.localStorage.clear();\n    }\n  }\n\n  private static getKey(key: string) {\n    return `${this.STORAGE_KEY_PREFIX}_${key}`;\n  }\n\n  private static didVersionChange(prev: string | null, current: string) {\n    try {\n      if (prev) {\n        return compareVersions(current, prev) !== 0;\n      }\n    } catch {\n      // Something went wrong with parsing.\n    }\n\n    // If there's no existing version number or we had an exception while\n    // comparing it, just return `true` to play it safe.\n    return true;\n  }\n\n  private static clearOnVersionMismatch() {\n    const prevVersion = this.getItem(this.VERSION_STORAGE_KEY);\n    if (this.didVersionChange(prevVersion, version)) {\n      // If the current localstorage was created with another version of\n      // PuzzTool, clear the local storage to get rid of any obsolete or\n      // incompatible artifacts.\n      this.clear();\n\n      // Store the current version\n      this.setItem(this.VERSION_STORAGE_KEY, version);\n    }\n  }\n}\n\nexport default LocalStorage;\n","// generated by genversion\nexport const version = '0.7.0';\n","import { useEffect, useLayoutEffect } from 'react';\nimport LocalStorage from '../Data/LocalStorage';\n\nexport function useLocalStorage<T>(\n  localStorageKey: string,\n  onRestoreState: (state: T | null) => void,\n  onSaveState: () => T) {\n  // This effect runs synchronously on the first mount of the control or\n  // whenever the `localStorageKey` value changes. This is to ensure that there\n  // is no flickering as the data is rendered. `onRestoreState` is intentionally\n  // omitted from deps since each call will have a unique version of the\n  // function.\n  useLayoutEffect(\n    () => onRestoreState(LocalStorage.getObject<T>(localStorageKey)),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [localStorageKey]);\n\n  // This effect runs on every update of the control because the deps parameter\n  // is intentionally omitted.\n  useEffect(() => LocalStorage.setObject(localStorageKey, onSaveState()));\n}\n","import React from 'react';\nimport Table from 'react-bootstrap/Table';\nimport {\n  WordSearchSolver,\n  WordSearchResult,\n  WordSearchDirection,\n} from 'puzzle-lib';\nimport './WordSearchOutput.scss';\n\ninterface Props {\n  gridInputText: string;\n  useCardinals: boolean;\n  useDiagonals: boolean;\n  wordListInputText: string;\n}\n\nfunction getWordSearchDirection(useCardinals: boolean, useDiagonals: boolean) {\n  if (useCardinals && useDiagonals) {\n    return WordSearchDirection.CardinalAndDiagonal;\n  } else if (useCardinals) {\n    return WordSearchDirection.Cardinal;\n  } else if (useDiagonals) {\n    return WordSearchDirection.Diagonal;\n  }\n\n  return WordSearchDirection.None;\n}\n\nfunction splitLines(str: string) {\n  return str.split(/\\r?\\n/);\n}\n\nfunction highlightArray(inputGrid: string[][], results: WordSearchResult[]) {\n  const shouldHighlight: boolean[][] = [];\n\n  for (const line of inputGrid) {\n    const hightlightLine = Array.from({ length: line.length }, () => false);\n    shouldHighlight.push(hightlightLine);\n  }\n\n  for (const result of results) {\n    for (const point of result.points) {\n      shouldHighlight[point.y][point.x] = true;\n    }\n  }\n\n  return shouldHighlight;\n}\n\nfunction getGridHighlights(\n  grid: string[][],\n  wordsToFind: string[],\n  direction: WordSearchDirection) {\n  const solver = new WordSearchSolver();\n  solver.setDirections(direction);\n  solver.setGrid(grid);\n  solver.setWords(wordsToFind);\n  const results = solver.findWords();\n\n  return highlightArray(grid, results);\n}\n\nfunction getColumnClassName(shouldHighlight: boolean) {\n  return shouldHighlight ? 'WordSearchOutput-highlightChar' : '';\n}\n\nfunction WordSearchOutput(props: Props) {\n  const gridInputText = props.gridInputText.trim();\n  if (!gridInputText) {\n    return null;\n  }\n\n  const lines = splitLines(gridInputText);\n  const grid: string[][] = [];\n  for (const line of lines) {\n    grid.push(line.split(''));\n  }\n\n  // Process direction settings\n  const direction = getWordSearchDirection(\n    props.useCardinals,\n    props.useDiagonals);\n\n  // Split on newlines, trim any whitespace, and filter out empty lines.\n  const wordList = splitLines(props.wordListInputText)\n    .filter(word => word.length > 0);\n\n  const shouldHighlight = getGridHighlights(grid, wordList, direction);\n\n  return (\n    <Table className=\"WordSearchOutput\" borderless={true}>\n      <tbody>\n        {grid.map((row, rowIndex) => (\n          <tr key={rowIndex}>\n            {row.map((col, colIndex) => (\n              <td\n                className={getColumnClassName(shouldHighlight[rowIndex][colIndex])}\n                key={`${rowIndex},${colIndex}`}\n              >\n                {col}\n              </td>\n            ))}\n          </tr>\n        ))}\n      </tbody>\n    </Table>\n  );\n}\n\nexport default WordSearchOutput;\n","import React, { FormEvent, useState } from 'react';\r\nimport Alert from 'react-bootstrap/Alert';\r\nimport Card from 'react-bootstrap/Card';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Container from 'react-bootstrap/Container';\r\nimport FormCheck from 'react-bootstrap/FormCheck';\r\nimport FormControl, { FormControlProps } from 'react-bootstrap/FormControl';\r\nimport Row from 'react-bootstrap/Row';\r\nimport { useFocusInput } from '../Hooks/FocusInput';\r\nimport { useLocalStorage } from '../Hooks/LocalStorage';\r\nimport WordSearchOutput from './WordSearchOutput';\r\nimport './WordSearchComponent.scss';\r\n\r\ninterface SavedState {\r\n  gridInputText: string;\r\n  wordListInputText: string;\r\n  useDiagonals: boolean;\r\n  useCardinals: boolean;\r\n}\r\n\r\nfunction WordSearchComponent() {\r\n  const inputRef = useFocusInput();\r\n  const [gridInputText, setGridInputText] = useState('');\r\n  const [wordListInputText, setWordListInputText] = useState('');\r\n  const [useCardinals, setUseCardinals] = useState(true);\r\n  const [useDiagonals, setUseDiagonals] = useState(true);\r\n\r\n  useLocalStorage<SavedState>(\r\n    'WordSearchComponent',\r\n    (savedState) => {\r\n      if (savedState) {\r\n        setGridInputText(savedState.gridInputText);\r\n        setWordListInputText(savedState.wordListInputText);\r\n        setUseCardinals(savedState.useCardinals);\r\n        setUseDiagonals(savedState.useDiagonals);\r\n      }\r\n    },\r\n    () => {\r\n      return {\r\n        gridInputText,\r\n        wordListInputText,\r\n        useCardinals,\r\n        useDiagonals,\r\n      };\r\n    });\r\n\r\n  function onGridTextChanged(event: FormEvent<FormControlProps>) {\r\n    const element = (event.target as HTMLInputElement);\r\n    setGridInputText(element.value);\r\n  }\r\n\r\n  function onListTextChanged(event: FormEvent<FormControlProps>) {\r\n    const element = (event.target as HTMLInputElement);\r\n    setWordListInputText(element.value);\r\n  }\r\n\r\n  function onCardinalCheckboxChange(event: FormEvent<HTMLInputElement>) {\r\n    const element = (event.target as HTMLInputElement);\r\n    setUseCardinals(element.checked);\r\n  }\r\n\r\n  function onDiagonalCheckboxChange(event: FormEvent<HTMLInputElement>) {\r\n    const element = (event.target as HTMLInputElement);\r\n    setUseDiagonals(element.checked);\r\n  }\r\n\r\n  function renderEmptyDirection() {\r\n    if (!useCardinals && !useDiagonals) {\r\n      return (\r\n        <Alert variant=\"warning\">\r\n          No directions are selected. No results will be shown.\r\n        </Alert>\r\n      );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"WordSearchComponent\">\r\n      <Container fluid={true}>\r\n        <Row noGutters={true}>\r\n          <Col md={4}>\r\n            <Card className=\"WordSearchComponent-ListInput\">\r\n              <Card.Header>\r\n                Enter the list of words to find, one word per line\r\n              </Card.Header>\r\n              <Card.Body>\r\n                <FormControl\r\n                  as=\"textarea\"\r\n                  onChange={onListTextChanged}\r\n                  placeholder=\"Word List To Find\"\r\n                  value={wordListInputText}\r\n                />\r\n                {renderEmptyDirection()}\r\n                <FormCheck\r\n                  checked={useDiagonals}\r\n                  id=\"WordSearchComponent-checkbox-diagonal\"\r\n                  label=\"Use diagonal directions\"\r\n                  onChange={onDiagonalCheckboxChange}\r\n                  type=\"checkbox\"\r\n                />\r\n                <FormCheck\r\n                  checked={useCardinals}\r\n                  id=\"WordSearchComponent-checkbox-cardinal\"\r\n                  label=\"Use cardinal directions\"\r\n                  onChange={onCardinalCheckboxChange}\r\n                  type=\"checkbox\"\r\n                />\r\n              </Card.Body>\r\n            </Card>\r\n          </Col>\r\n          <Col md={8}>\r\n            <Card className=\"WordSearchComponent-GridInput\">\r\n              <Card.Header>\r\n                Enter the word search grid, one row of letters per line\r\n              </Card.Header>\r\n              <Card.Body>\r\n                <FormControl\r\n                  as=\"textarea\"\r\n                  onChange={onGridTextChanged}\r\n                  placeholder=\"Grid Text\"\r\n                  ref={inputRef}\r\n                  spellCheck={false}\r\n                  value={gridInputText}\r\n                />\r\n              </Card.Body>\r\n            </Card>\r\n          </Col>\r\n        </Row>\r\n        <Row noGutters={true}>\r\n          <Col md={12}>\r\n            <Card className=\"WordSearchComponent-GridOutput\">\r\n              <Card.Header>Output</Card.Header>\r\n              <Card.Body>\r\n                <WordSearchOutput\r\n                  gridInputText={gridInputText}\r\n                  useCardinals={useCardinals}\r\n                  useDiagonals={useDiagonals}\r\n                  wordListInputText={wordListInputText}\r\n                />\r\n              </Card.Body>\r\n            </Card>\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default WordSearchComponent;\r\n","import { useCallback } from 'react';\n\nexport function useFocusInput() {\n  // This callback is only executed once per change of the returned variable.\n  return useCallback(\n    (node) => {\n      if (node) {\n        node.focus();\n      }\n    },\n    []);\n}\n","import React from 'react';\r\nimport WordSearchComponent from '../../Solvers/WordSearchComponent';\r\nimport './WordSearch.scss';\r\n\r\nfunction WordSearch() {\r\n  return (\r\n    <div className=\"WordSearch\">\r\n      <h2>Word Search</h2>\r\n      <WordSearchComponent />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default WordSearch;\r\n"],"sourceRoot":""}